<div class="inner-tab-content">
    <div class="clsPlusMinusButton">
        <a href="javascript:;" (click)="onExpand()" class="btn btn-common">+ <span>Expand ALl</span></a>
        <a href="javascript:;" (click)="onCollapse()" class="btn btn-common">- <span>Collapse All</span></a>
    </div>
    <div class="tab-pane assignpaid-section" id="AssignARUnpaid">
        <div class="table-responsive">
            <dx-data-grid #grid id="gridContainerassignUnpaidList" class="radflowGrid radflowGrid_plusMinus" [dataSource]="AssignARpaid"
                [showBorders]="false" [allowColumnResizing]="true" [columnAutoWidth]="true" [showColumnHeaders]="false">
                <dxo-selection mode="single"></dxo-selection>
                <dxo-paging [pageSize]="pageSize" [pageIndex]="pageNumber"></dxo-paging>
                <dxo-pager [visible]="false"></dxo-pager>
                <dxo-sorting mode="none"></dxo-sorting>

                <dxi-column cellTemplate="CheckNumberTemplate"></dxi-column>

                <div *dxTemplate="let data of 'CheckNumberTemplate'">
                    <div *ngIf="data.data.checkNumber && data.data.checkDate && data.data.checkAmount" class="clsChecknumberBox modal-lower-case">
                      <span class="mr-2">Check No: {{data.data.checkNumber}}</span>
                      <span class="mr-2">Check Date: {{data.data.checkDate}}</span>
                      <span class="mr-2">Amount: {{data.data.checkAmount | currency:'USD':'symbol-narrow'}}</span>
                    </div>
                </div>

                <dxo-master-detail [enabled]="true" template="batchNameList"></dxo-master-detail>
                <div class="innerBatchTitle" *dxTemplate="let detail of 'batchNameList'">
                    <dx-data-grid [dataSource]="detail.data.checkWiseData" class="innerList" [columnAutoWidth]="true"
                        [showBorders]="false" [repaintChangesOnly]="true" [allowColumnResizing]="true"  [showColumnHeaders]="false">
                        <dxo-scrolling columnRenderingMode="virtual"> </dxo-scrolling>
                        <dxo-sorting mode="none"></dxo-sorting>
                        <!-- <dxi-column dataField="batchName" caption="Batchname"> </dxi-column> -->
                        <dxi-column cellTemplate="BatchTemplate">
                          <div class="clsBatchBox" *dxTemplate="let data of 'BatchTemplate'">
                          {{data.data.batchName}}
                          <span class="studyCount">
                            {{data.data.studyCounts }} <span *ngIf="data.data.studyCounts > 1;else oneStudy">Studies</span>
                            <ng-template #oneStudy>
                               <span>Study</span>
                            </ng-template>
                          </span>
                         </div>
                        </dxi-column>

                        <dxi-column dataField="batchName" caption="PDFIcon" cellTemplate="PDFIconTemplate"></dxi-column>
                        <div *dxTemplate="let data of 'PDFIconTemplate'">
                          <a class="PDFIcon" (click)="downloadPDF(data.data)"><i class="fa fa-file-pdf-o PDFIcon"></i></a>
                      </div>
                        <dxo-master-detail [enabled]="true" template="batchDetail"></dxo-master-detail>
                        <div class="innerTable" *dxTemplate="let detail of 'batchDetail'">
                            <dx-data-grid [dataSource]="detail.data.batchWiseData" class="innerList" [columnAutoWidth]="true"
                                [showBorders]="true" [repaintChangesOnly]="true" [allowColumnResizing]="true">
                                <dxo-scrolling columnRenderingMode="virtual"> </dxo-scrolling>
                                <dxo-sorting mode="none"></dxo-sorting>
                                <dxi-column dataField="rad" caption="RAD"> </dxi-column>
                                <dxi-column dataField="dateRead" caption="Date Read"></dxi-column>
                                <dxi-column dataField="dateARAssigned" caption="AR Assigned Date"></dxi-column>
                                <dxi-column dataField="executionDate" caption="Execution Date"></dxi-column>
                                <dxi-column dataField="paidDate" caption="Paid Date"></dxi-column>
                                <dxi-column dataField="fundingCompany" caption="Funding CO"></dxi-column>
                                <dxi-column dataField="patientId" caption="Patient ID"></dxi-column>
                                <dxi-column dataField="lastName" caption="Last Name"></dxi-column>
                                <dxi-column dataField="firstName" caption="First Name"></dxi-column>
                                <dxi-column dataField="dateOfBirth" caption="DOB"></dxi-column>
                                <dxi-column dataField="study" caption="Study"></dxi-column>
                            </dx-data-grid>

                        </div>
                    </dx-data-grid>

                </div>
            </dx-data-grid>
        </div>
        <div class="pagination-theme" *ngIf="totalRecord > 0">
            <div
                *ngFor="let item of AssignARpaid | paginate: { id:'pagination1', itemsPerPage: pageSize, currentPage: currentPageNumber, totalItems:totalRecord }">
            </div>
            <pagination-controls id="pagination1" (pageChange)="onPageNumberChange($event)"></pagination-controls>
        </div>
    </div>
</div>
