<div class="modal-content scroll-up">
    <div class="modal-header">
        <h5 class="modal-title">{{FacilityName}}</h5>
        <div class="close-dismiss"></div>
        <div class="close-dismiss" (click)="close()"></div>
    </div>
    <div class="modal-body">
        <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12" *ngIf="!LeaseBlockId">
            <div class="radio-theme">
                <input class="form-control" name="ScheduleType" id="BlockTime" type="radio"
                    (change)="changeScheduleType($event.target.value)" value="true" checked="checked">
                <label for="BlockTime">Add time to lease</label>
            </div>
            <div class="radio-theme">
                <input class="form-control" name="ScheduleType" id="BlockOff"
                    (change)="changeScheduleType($event.target.value)" value="false" type="radio">
                <label for="BlockOff">Create black out time(Cannot lease during these times)</label>
            </div>
        </div>
        <form *ngIf="!isBlockOffTime" [formGroup]="leaseBlockOffForm" class="theme-form" novalidate>

            <div class="row">
                <div class="col-xl-2 col-lg-2 col-md-12 col-sm-12 col-12">
                    <div class="theme-label-subtitle">Modality/Resource</div>
                </div>
                <div class="col-xl-3 col-lg-3 col-md-12 col-sm-12 col-12 ms-lf-col">
                    <div class="form-group">
                        <div class="input-group">
                            <div class="input-group">
                                <select #modalityGetOffDays id="modalityGetOffDays" class="form-control"
                                    formControlName="modalityType"
                                    [ngClass]="{ 'is-invalid': (BlockOffDaysSubmitted && editBlockOffFormControls.modalityType.errors) }"
                                    (change)="changedOffDays($event)">
                                    <option value="" selected>Select Modality</option>
                                    <option *ngIf="modalityResourcesList.length > 0" value="0" selected>All</option>
                                    <optgroup *ngFor="let group of modalityResourcesList" id={{group.Modality}}
                                        label="{{group.Modality}}">
                                        <option *ngFor="let item of group.Resources" value={{item.INTERNALRESOURCEID}}>
                                            {{item.RESOURCENAME}}</option>
                                    </optgroup>
                                </select>
                            </div>
                        </div>
                        <div *ngIf="(BlockOffDaysSubmitted && editBlockOffFormControls.modalityType.errors)"
                            class="invalid-feedback">
                            <div *ngIf="editBlockOffFormControls.modalityType.errors?.required">
                                modality is required</div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-xl-2 col-lg-2 col-md-12 col-sm-12 col-12">
                    <div class="theme-label-subtitle">Lease Time Starts</div>
                </div>
                <div class="col-xl-3 col-lg-3 col-md-12 col-sm-12 col-12 ms-lf-col">
                    <div class="form-group">
                        <div class="input-group icon-active">
                            <dx-date-box (onValueChanged)="handleBlockOffDaysChange($event,'start_date')" 
                                formControlName="start_date" type="date" onkeydown="return false"
                                [ngClass]="{ 'is-invalid': (BlockOffDaysSubmitted && editBlockOffFormControls.start_date.errors) }">
                            </dx-date-box>
                        </div>
                        <div *ngIf="(BlockOffDaysSubmitted && editBlockOffFormControls.start_date.errors)"
                            class="invalid-feedback">
                            <div *ngIf="editBlockOffFormControls.start_date.errors?.required">
                                Start date is required</div>
                        </div>
                    </div>
                </div>
                <div class="col-xl-3 col-lg-3 col-md-12 col-sm-12 col-12">
                    <div class="form-group">
                        <div class="input-group icon-active">
                            <dx-date-box (onValueChanged)="handleBlockOffDaysChange($event,'start_time')"
                                onkeydown="return false" formControlName="start_time" class="form-control"
                                [ngClass]="{ 'is-invalid': (BlockOffDaysSubmitted && editBlockOffFormControls.start_time.errors) }"
                                type="time" pickerType="list" [interval]="5">
                            </dx-date-box>
                        </div>
                        <div *ngIf="(BlockOffDaysSubmitted && editBlockOffFormControls.start_time.errors)"
                            class="invalid-feedback">
                            <div *ngIf="editBlockOffFormControls.start_time.errors?.required">
                                Start time is required</div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-xl-2 col-lg-2 col-md-12 col-sm-12 col-12">
                    <div class="theme-label-subtitle">Lease Time Ends</div>
                </div>
                <div class="col-xl-3 col-lg-3 col-md-12 col-sm-12 col-12 ms-lf-col">
                    <div class="form-group">
                        <div class="input-group icon-active">
                            <dx-date-box (onValueChanged)="handleBlockOffDaysChange($event,'end_date')"
                                onkeydown="return false" formControlName="end_date" type="date"
                                [ngClass]="{ 'is-invalid': (BlockOffDaysSubmitted && editBlockOffFormControls.end_date.errors) }">
                            </dx-date-box>
                        </div>
                        <div *ngIf="(BlockOffDaysSubmitted && editBlockOffFormControls.end_date.errors)"
                            class="invalid-feedback">
                            <div *ngIf="editBlockOffFormControls.end_date.errors?.required">
                                End date is required</div>
                        </div>
                    </div>
                </div>
                <div class="col-xl-3 col-lg-3 col-md-12 col-sm-12 col-12">
                    <div class="form-group">
                        <div class="input-group icon-active">
                            <dx-date-box (onValueChanged)="handleBlockOffDaysChange($event,'end_time')"
                                formControlName="end_time" class="form-control" onkeydown="return false"
                                [ngClass]="{ 'is-invalid': (BlockOffDaysSubmitted && editBlockOffFormControls.end_time.errors) }"
                                type="time" pickerType="list" [interval]="5">
                            </dx-date-box>
                        </div>
                        <div *ngIf="(BlockOffDaysSubmitted && editBlockOffFormControls.end_time.errors)"
                            class="invalid-feedback">
                            <div *ngIf="editBlockOffFormControls.end_time.errors?.required">
                                End time is required</div>
                        </div>
                    </div>
                </div>
            </div>

        </form>
        <form *ngIf="isBlockOffTime" [formGroup]="leaseForm" class="theme-form" novalidate>
            <div class="row">

                <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12">
                    <div class="theme-label-subtitle"><a class="link-btn" (click)="senddatatoschd_facilities()">Facility
                            Details</a></div>
                </div>
            </div>
            <div class="row" [class.disabled]="LeaseId?true:false">
                <div class="col-xl-2 col-lg-2 col-md-12 col-sm-12 col-12">
                    <div class="theme-label-subtitle">Modality/Resource</div>
                </div>
                <div class="col-xl-3 col-lg-3 col-md-12 col-sm-12 col-12 ms-lf-col">
                    <div class="form-group">
                        <div class="input-group">
                            <div *ngIf="!LeaseId" [class.disabled]="LeaseId?true:false" class="input-group">
                                <select #modalityGetType id="modalityGetType" class="form-control"
                                    formControlName="modalityType"
                                    [ngClass]="{ 'is-invalid': (submitted && editFormControls.modalityType.errors) }"
                                    (change)="changed($event)">
                                    <option value='' selected>Select Modality</option>
                                    <optgroup *ngFor="let group of modalityResourcesList" id={{group.Modality}}
                                        label="{{group.Modality}}">
                                        <option *ngFor="let item of group.Resources" value={{item.INTERNALRESOURCEID}}>
                                            {{item.RESOURCENAME}}</option>
                                    </optgroup>
                                </select>
                            </div>
                            <div *ngIf="LeaseId">
                                <input type="text" class="form-control" disabled
                                    [value]="selectedModality + ' / ' + selectedResourceName " />
                            </div>

                        </div>
                        <div *ngIf="(submitted && editFormControls.modalityType.errors)" class="invalid-feedback">
                            <div *ngIf="editFormControls.modalityType.errors?.required">
                                modality is required</div>
                        </div>
                    </div>
                </div>
                <div class="col-xl-3 col-lg-3 col-md-12 col-sm-12 col-12">
                    <div class="form-group">
                        <div *ngIf="!LeaseId" class="input-group">
                            <select class="form-control" formControlName="contrastType"
                                [ngClass]="{ 'is-invalid': (submitted && editFormControls.contrastType.errors) }">
                                <option value="" selected>Select contrast Type</option>
                                <option value='w/o'>W / O Contrast ONLY</option>
                                <option value='w'>W / Contrast</option>
                            </select>

                        </div>
                        <div *ngIf="LeaseId">
                            <input type="text" class="form-control" disabled [value]="ResourceType + ' CONTRAST' " />
                        </div>
                        <div *ngIf="(submitted && editFormControls.contrastType.errors)" class="invalid-feedback">
                            <div *ngIf="editFormControls.contrastType.errors?.required">
                                Contrast Type is required</div>
                        </div>
                    </div>
                </div>
                <div class="col-xl-3 col-lg-3 col-md-12 col-sm-12 col-12">
                    <div class="form-group">
                        <div *ngIf="IsLeaseIdExists" class="input-group icon-active">
                            Lease Id : {{displayLeaseIdSchedulerPopUp}}
                        </div>
                        <div *ngIf="TotalLeaseHours" class="input-group icon-active">
                            Total Lease Hour(s) :<br> {{TotalLeaseHours}}
                        </div>
                    </div>
                </div>
                <!-- <div *ngIf="TotalLeaseHours" class="col-xl-3 col-lg-3 col-md-12 col-sm-12 col-12">
                    <div class="form-group">
                        <div class="input-group icon-active">
                            Total Lease Hour(s) :<br> {{TotalLeaseHours}}
                        </div>
                    </div>
                </div> -->
            </div>
            <div class="row" [class.disabled]="LeaseId?true:false">
                <div class="col-xl-2 col-lg-2 col-md-12 col-sm-12 col-12">
                    <div class="theme-label-subtitle">Lease Time Starts</div>
                </div>
                <div class="col-xl-3 col-lg-3 col-md-12 col-sm-12 col-12 ms-lf-col">
                    <div class="form-group">
                        <div class="input-group icon-active">
                            <dx-date-box [disabled]="isLeaseSigned ? 'disabled' : null"
                                [displayFormat]="dateTimeFormatCustom.Date" dateSerializationFormat="MM-dd-yyyy"
                                onkeydown="return false" (onValueChanged)="handleValueChange($event,'start_date')"
                                formControlName="start_date" type="date"
                                [ngClass]="{ 'is-invalid': (submitted && editFormControls.start_date.errors) }">
                            </dx-date-box>
                        </div>
                        <div *ngIf="(submitted && editFormControls.start_date.errors)" class="invalid-feedback">
                            <div *ngIf="editFormControls.start_date.errors?.required">
                                Start date is required</div>
                        </div>
                    </div>
                </div>
                <div class="col-xl-3 col-lg-3 col-md-12 col-sm-12 col-12">
                    <div class="form-group">
                        <div class="input-group icon-active">
                            <dx-date-box [disabled]="isLeaseSigned ? 'disabled' : null"
                                (onValueChanged)="handleValueChange($event,'start_time')" onkeydown="return false"
                                formControlName="start_time" class="form-control"
                                [ngClass]="{ 'is-invalid': (submitted && editFormControls.start_time.errors) }"
                                type="time" pickerType="list" [interval]="5">
                            </dx-date-box>
                        </div>
                        <div *ngIf="(submitted && editFormControls.start_time.errors)" class="invalid-feedback">
                            <div *ngIf="editFormControls.start_time.errors?.required">
                                Start time is required</div>
                        </div>
                    </div>
                </div>
                <div *ngIf="TotalBlockHours" class="col-xl-4 col-lg-4 col-md-12 col-sm-12 col-12">
                    <div class="form-group">
                        <div class="input-group icon-active">
                            Current blocked Hour(s) :<br> {{TotalBlockHours}}
                        </div>
                    </div>
                </div>
            </div>
            <div class="row" [class.disabled]="LeaseId?true:false">
                <div class="col-xl-2 col-lg-2 col-md-12 col-sm-12 col-12">
                    <div class="theme-label-subtitle">Lease Time Ends</div>
                </div>
                <div class="col-xl-3 col-lg-3 col-md-12 col-sm-12 col-12 ms-lf-col">
                    <div class="form-group">
                        <div class="input-group icon-active">
                            <dx-date-box [disabled]="isLeaseSigned ? 'disabled' : null"
                                [displayFormat]="dateTimeFormatCustom.Date" dateSerializationFormat="MM-dd-yyyy"
                                (onValueChanged)="handleValueChange($event,'end_date')" onkeydown="return false"
                                formControlName="end_date" type="date"
                                [ngClass]="{ 'is-invalid': (submitted && editFormControls.end_date.errors) }">
                            </dx-date-box>
                        </div>
                        <div *ngIf="(submitted && editFormControls.end_date.errors)" class="invalid-feedback">
                            <div *ngIf="editFormControls.end_date.errors?.required">
                                End date is required</div>
                        </div>
                    </div>
                </div>
                <div class="col-xl-3 col-lg-3 col-md-12 col-sm-12 col-12">
                    <div class="form-group">
                        <div class="input-group icon-active">
                            <dx-date-box [disabled]="isLeaseSigned ? 'disabled' : null"
                                (onValueChanged)="handleValueChange($event,'end_time')" formControlName="end_time"
                                class="form-control" onkeydown="return false"
                                [ngClass]="{ 'is-invalid': (submitted && editFormControls.end_time.errors) }"
                                type="time" pickerType="list" [interval]="5">
                            </dx-date-box>
                        </div>
                        <div *ngIf="(submitted && editFormControls.end_time.errors)" class="invalid-feedback">
                            <div *ngIf="editFormControls.end_time.errors?.required">
                                End time is required</div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="repeater-block">
                <div class="rep-head">
                    <strong>Repeat Event</strong>
                    <span  id="repeat-control" (click)="changetxtFunction()">Disabled</span>
                </div>
                <form  [formGroup]="reccurringBlockForm" class="theme-form" >
                <div *ngIf="showReccuringBlock" class="rp-tab-block">
                    <div class="radio-tabs lab-space">  
                        <label><input class="dhx_repeat_radio" type="radio" name="repeatEvery" formControlName ="repeatEvery" value="day"
                                id=""  checked >Daily</label>
                        <label><input class="dhx_repeat_radio" type="radio" name="repeatEvery" formControlName ="repeatEvery" value="week">Weekly</label>
                        <label><input class="dhx_repeat_radio" type="radio" name="repeatEvery" formControlName ="repeatEvery" value="month"
                                >Monthly</label>
                    </div>
                    <div  *ngIf = "reccurringBlockForm.controls.repeatEvery.value == 'day'" class="lab-space bx-space" id="dhx_repeat_day">
                        <label><input class="dhx_repeat_radio" type="radio" name="dailyOccurance" formControlName ="dailyOccurance" value="everyDay">Every</label>
                        <label><input class="dhx_repeat_text" type="text" name="dailyOccranceNumberOfDays" formControlName ="dailyOccranceNumberOfDays" value="1">day</label> <br>
                        <label><input class="dhx_repeat_radio" type="radio" name="dailyOccurance" formControlName ="dailyOccurance" checked="" value="everySelectedWeekDay">Every
                            workday</label>
                    </div>
                    <div *ngIf = "reccurringBlockForm.controls.repeatEvery.value == 'week'" class="bx-space">
                        <label> Repeat every<input class="dhx_repeat_text" type="text" name="OccuranceNumberOfWeeks" formControlName ="OccuranceNumberOfWeeks"
                                value="1"></label>
                        <span>week next days:</span><br>
                        <table class="dhx_days">
                            <tbody formArrayName="weekOccuranceDays">
                                <tr  *ngFor="let singleFormGroup of reccurringBlockForm.controls.weekOccuranceDays.controls; let i = index">
                                    <ng-container [formGroupName]="i">   
                                        
                                    <td><label><input class="dhx_repeat_checkbox" id="checkMonday"  (change)="onChange(i,$event, $event.target.checked)"   type="checkbox" name="reccuringMonday" formControlName ="reccuringMonday" 
                                                value="1">Monday</label>
                                        <label><input class="dhx_repeat_checkbox" id="checkTuesday" (change)="onChange(i,$event, $event.target.checked)"  type="checkbox" name="reccuringTuesday" formControlName ="reccuringTuesday"
                                                value="2">Tuesday</label>
                                    </td>
                                    <td><label><input class="dhx_repeat_checkbox" id="checkWednesday" (change)="onChange(i,$event, $event.target.checked)"  type="checkbox" name="reccuringWednesday" formControlName ="reccuringWednesday"
                                                value="3">Wednesday</label>
                                        <label><input class="dhx_repeat_checkbox" id="checkThursday"  (change)="onChange(i,$event, $event.target.checked)"  type="checkbox" name="reccuringThursday" formControlName ="reccuringThursday"
                                                value="4">Thursday</label>
                                    </td>
                                    <td> <label><input class="dhx_repeat_checkbox"  id="checkFriday"  (change)="onChange(i,$event, $event.target.checked)"  type="checkbox" name="reccuringFriday" formControlName ="reccuringFriday"
                                                value="5">Friday</label>
                                        <label><input class="dhx_repeat_checkbox" id="checkSaturday"  (change)="onChange(i,$event, $event.target.checked)"  type="checkbox" name="reccuringSaturday" formControlName ="reccuringSaturday"
                                                value="6">Saturday</label>
                                    </td>
                                    <td> <label><input class="dhx_repeat_checkbox" id="checkSunday" (change)="onChange(i,$event, $event.target.checked)"  type="checkbox" name="reccuringSunday" formControlName ="reccuringSunday"
                                                value="0">Sunday</label></td>
                                    </ng-container>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div *ngIf = "reccurringBlockForm.controls.repeatEvery.value == 'month'"  class="monthlytabblock" id="dhx_repeat_month" >
                        <label class="dhx_repeat_month_label"><input class="dhx_repeat_radio" type="radio"
                            name="monthlyOccurance" formControlName ="monthlyOccurance" value="reapeatMonthlyOccurance">Repeat</label>
                        <label><input class="dhx_repeat_text" type="text" name="month_day" value="1">day every</label>
                        <label><input class="dhx_repeat_text" type="text" name="month_count" value="1">month</label><br>
                        <label class="dhx_repeat_month_label">
                            <input class="dhx_repeat_radio" type="radio" name="monthlyOccurance" formControlName ="monthlyOccurance" checked=""
                                value="w">On</label>
                        <input class="dhx_repeat_text" type="text" name="month_week2" formControlName = "staticMonthlyOccurance" value="1"><label>
                            <select class="form-control weekselect">
                                <option value="1" selected="">Monday</option>
                                <option value="2">Tuesday</option>
                                <option value="3">Wednesday</option>
                                <option value="4">Thursday</option>
                                <option value="5">Friday</option>
                                <option value="6">Saturday</option>
                                <option value="0">Sunday</option>
                            </select>every</label>
                        <label><input class="dhx_repeat_text" type="text" name="month_count2" value="1">month</label>
                    </div>
                    <div id="dhx_repeat_year" style="display:none;">
                        <label class="dhx_repeat_year_label"><input class="dhx_repeat_radio" type="radio"
                                name="year_type" value="d">Every</label>
                        <label><input class="dhx_repeat_text" type="text" name="year_day" value="1">day</label>
                        <label><select name="year_month" class="form-control weekselect">
                                <option value="0" selected="">January</option>
                                <option value="1">February</option>
                                <option value="2">March</option>
                                <option value="3">April</option>
                                <option value="4">May</option>
                                <option value="5">June</option>
                                <option value="6">July</option>
                                <option value="7">August</option>
                                <option value="8">September</option>
                                <option value="9">October</option>
                                <option value="10">November</option>
                                <option value="11">December</option>
                            </select>month</label><br>
                        <label class="dhx_repeat_year_label">
                            <input class="dhx_repeat_radio" type="radio" name="year_type" checked=""
                                value="w">On</label>

                        <input class="dhx_repeat_text" type="text" name="year_week2" value="1">
                        <select class="form-control weekselect" name="year_day2">
                            <option value="1" selected="">Monday</option>
                            <option value="2">Tuesday</option>
                            <option value="3">Wednesday</option>
                            <option value="4">Thursday</option>
                            <option value="5">Friday</option>
                            <option value="6">Saturday</option>
                            <option value="7">Sunday</option>
                        </select><span class="of-txt">of</span><select class="form-control weekselect"
                            name="year_month2">
                            <option value="0" selected="">January</option>
                            <option value="1">February</option>
                            <option value="2">March</option>
                            <option value="3">April</option>
                            <option value="4">May</option>
                            <option value="5">June</option>
                            <option value="6">July</option>
                            <option value="7">August</option>
                            <option value="8">September</option>
                            <option value="9">October</option>
                            <option value="10">November</option>
                            <option value="11">December</option>
                        </select><br>
                    </div>
                    <div class="dhx_repeat_divider cs-diveider"></div>
                    <div class="dhx_repeat_right ndd-block">
                         <!-- <label><input class="dhx_repeat_radio" type="radio" formControlName="endOccurrance" name="endOccurrance" value="#no" checked="">No end date</label> -->
                         <br> <label><input class="dhx_repeat_radio" type="radio" formControlName="endOccurrance" name="endOccurrance" value="">After</label>
                         <input class="dhx_repeat_text" type="text" name="endOccurranceNumberOfDays" formControlName="endOccurranceNumberOfDays" value="endOccurranceNumberOfDays">occurrences<br>
                          <label><input class="dhx_repeat_radio" type="radio"  value ='endByDate' formControlName="endOccurrance" name="endOccurrance"/>End by</label>
                          <!-- <input class="dhx_repeat_date" type="text" formControlName = "endOccurrancedate" name="endOccurrancedate" value="25.02.2023"><br>  -->
                          <dx-date-box (onValueChanged)="onOccuranceEndDate()" 
                          formControlName="endOccurrancedate" type="date" onkeydown="return false">
                      </dx-date-box>
                    </div>


<div class="dhx_wrap_section select-dm-cpicker">
    <div id="area_1677136859152" class="dhx_cal_lsection">
        <label for="input_1677136859155">Time period</label>
    </div>
    <div  class="dhx_section_time">
        <select class="dhx_lightbox_time_select" aria-label="Hour Minute" id="input_1677136859155">
            <option value="0">00:00</option>
            <option value="5">00:05</option><option value="10">00:10</option><option value="15">00:15</option>
            <option value="20">00:20</option><option value="25">00:25</option><option value="30">00:30</option>
            <option value="35">00:35</option><option value="40">00:40</option><option value="45">00:45</option>
            <option value="50">00:50</option><option value="55">00:55</option><option value="60">01:00</option>
            <option value="65">01:05</option><option value="70">01:10</option><option value="75">01:15</option>
            <option value="80">01:20</option><option value="85">01:25</option><option value="90">01:30</option>
            <option value="95">01:35</option><option value="100">01:40</option><option value="105">01:45</option>
            <option value="110">01:50</option><option value="115">01:55</option><option value="120">02:00</option>
            <option value="125">02:05</option><option value="130">02:10</option><option value="135">02:15</option>
            <option value="140">02:20</option><option value="145">02:25</option><option value="150">02:30</option>
            <option value="155">02:35</option><option value="160">02:40</option><option value="165">02:45</option>
            <option value="170">02:50</option><option value="175">02:55</option><option value="180">03:00</option>
      
          
            <option value="890">14:50</option><option value="895">14:55</option><option value="900">15:00</option><option value="905">15:05</option><option value="910">15:10</option><option value="915">15:15</option><option value="920">15:20</option><option value="925">15:25</option><option value="930">15:30</option><option value="935">15:35</option><option value="940">15:40</option><option value="945">15:45</option><option value="950">15:50</option><option value="955">15:55</option><option value="960">16:00</option><option value="965">16:05</option><option value="970">16:10</option><option value="975">16:15</option><option value="980">16:20</option><option value="985">16:25</option><option value="990">16:30</option><option value="995">16:35</option><option value="1000">16:40</option><option value="1005">16:45</option><option value="1010">16:50</option><option value="1015">16:55</option><option value="1020">17:00</option><option value="1025">17:05</option><option value="1030">17:10</option><option value="1035">17:15</option><option value="1040">17:20</option><option value="1045">17:25</option><option value="1050">17:30</option><option value="1055">17:35</option><option value="1060">17:40</option><option value="1065">17:45</option><option value="1070">17:50</option><option value="1075">17:55</option><option value="1080">18:00</option><option value="1085">18:05</option><option value="1090">18:10</option><option value="1095">18:15</option><option value="1100">18:20</option><option value="1105">18:25</option><option value="1110">18:30</option><option value="1115">18:35</option><option value="1120">18:40</option><option value="1125">18:45</option><option value="1130">18:50</option><option value="1135">18:55</option><option value="1140">19:00</option><option value="1145">19:05</option><option value="1150">19:10</option><option value="1155">19:15</option><option value="1160">19:20</option><option value="1165">19:25</option><option value="1170">19:30</option><option value="1175">19:35</option><option value="1180">19:40</option><option value="1185">19:45</option><option value="1190">19:50</option><option value="1195">19:55</option><option value="1200">20:00</option><option value="1205">20:05</option><option value="1210">20:10</option><option value="1215">20:15</option><option value="1220">20:20</option><option value="1225">20:25</option><option value="1230">20:30</option><option value="1235">20:35</option><option value="1240">20:40</option><option value="1245">20:45</option><option value="1250">20:50</option><option value="1255">20:55</option><option value="1260">21:00</option><option value="1265">21:05</option><option value="1270">21:10</option><option value="1275">21:15</option><option value="1280">21:20</option><option value="1285">21:25</option><option value="1290">21:30</option><option value="1295">21:35</option><option value="1300">21:40</option><option value="1305">21:45</option><option value="1310">21:50</option><option value="1315">21:55</option><option value="1320">22:00</option><option value="1325">22:05</option><option value="1330">22:10</option><option value="1335">22:15</option><option value="1340">22:20</option><option value="1345">22:25</option><option value="1350">22:30</option><option value="1355">22:35</option><option value="1360">22:40</option><option value="1365">22:45</option><option value="1370">22:50</option><option value="1375">22:55</option><option value="1380">23:00</option><option value="1385">23:05</option><option value="1390">23:10</option><option value="1395">23:15</option><option value="1400">23:20</option><option value="1405">23:25</option><option value="1410">23:30</option><option value="1415">23:35</option><option value="1420">23:40</option><option value="1425">23:45</option><option value="1430">23:50</option><option value="1435">23:55</option></select>  
            <select class="dhx_lightbox_day_select" aria-label="Day"><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option><option value="11">11</option><option value="12">12</option><option value="13">13</option><option value="14">14</option><option value="15">15</option><option value="16">16</option><option value="17">17</option><option value="18">18</option><option value="19">19</option><option value="20">20</option><option value="21">21</option><option value="22">22</option><option value="23">23</option><option value="24">24</option><option value="25">25</option><option value="26">26</option><option value="27">27</option><option value="28">28</option><option value="29">29</option><option value="30">30</option><option value="31">31</option></select> 
             <select class="dhx_lightbox_month_select" aria-label="Month"><option value="0">January</option><option value="1">February</option><option value="2">March</option><option value="3">April</option><option value="4">May</option><option value="5">June</option><option value="6">July</option><option value="7">August</option><option value="8">September</option><option value="9">October</option><option value="10">November</option><option value="11">December</option></select>  
             <select class="dhx_lightbox_year_select" aria-label="Year"><option value="2018">2018</option><option value="2019">2019</option><option value="2020">2020</option><option value="2021">2021</option><option value="2022">2022</option><option value="2023">2023</option><option value="2024">2024</option><option value="2025">2025</option><option value="2026">2026</option><option value="2027">2027</option></select> <span style="font-weight:normal; font-size:10pt;"> &nbsp;–&nbsp; </span>
             <select class="dhx_lightbox_time_select" aria-label="Hour Minute"><option value="0">00:00</option><option value="5">00:05</option><option value="10">00:10</option><option value="15">00:15</option><option value="20">00:20</option><option value="25">00:25</option><option value="30">00:30</option><option value="35">00:35</option><option value="40">00:40</option><option value="45">00:45</option><option value="50">00:50</option><option value="55">00:55</option><option value="60">01:00</option><option value="65">01:05</option><option value="70">01:10</option><option value="75">01:15</option><option value="80">01:20</option><option value="85">01:25</option><option value="90">01:30</option><option value="95">01:35</option><option value="100">01:40</option><option value="105">01:45</option><option value="110">01:50</option><option value="115">01:55</option><option value="120">02:00</option><option value="125">02:05</option><option value="130">02:10</option><option value="135">02:15</option><option value="140">02:20</option><option value="145">02:25</option><option value="150">02:30</option><option value="155">02:35</option><option value="160">02:40</option><option value="165">02:45</option><option value="170">02:50</option><option value="175">02:55</option><option value="180">03:00</option><option value="185">03:05</option><option value="190">03:10</option><option value="195">03:15</option><option value="200">03:20</option><option value="205">03:25</option><option value="210">03:30</option><option value="215">03:35</option><option value="220">03:40</option><option value="225">03:45</option><option value="230">03:50</option><option value="235">03:55</option><option value="240">04:00</option><option value="245">04:05</option><option value="250">04:10</option><option value="255">04:15</option><option value="260">04:20</option><option value="265">04:25</option><option value="270">04:30</option><option value="275">04:35</option><option value="280">04:40</option><option value="285">04:45</option><option value="290">04:50</option><option value="295">04:55</option><option value="300">05:00</option><option value="305">05:05</option><option value="310">05:10</option><option value="315">05:15</option><option value="320">05:20</option><option value="325">05:25</option><option value="330">05:30</option><option value="335">05:35</option><option value="340">05:40</option><option value="345">05:45</option><option value="350">05:50</option><option value="355">05:55</option><option value="360">06:00</option><option value="365">06:05</option><option value="370">06:10</option><option value="375">06:15</option><option value="380">06:20</option><option value="385">06:25</option><option value="390">06:30</option><option value="395">06:35</option><option value="400">06:40</option><option value="405">06:45</option><option value="410">06:50</option><option value="415">06:55</option><option value="420">07:00</option><option value="425">07:05</option><option value="430">07:10</option><option value="435">07:15</option><option value="440">07:20</option><option value="445">07:25</option><option value="450">07:30</option><option value="455">07:35</option><option value="460">07:40</option><option value="465">07:45</option><option value="470">07:50</option><option value="475">07:55</option><option value="480">08:00</option><option value="485">08:05</option><option value="490">08:10</option><option value="495">08:15</option><option value="500">08:20</option><option value="505">08:25</option><option value="510">08:30</option><option value="515">08:35</option><option value="520">08:40</option><option value="525">08:45</option><option value="530">08:50</option><option value="535">08:55</option><option value="540">09:00</option><option value="545">09:05</option><option value="550">09:10</option><option value="555">09:15</option><option value="560">09:20</option><option value="565">09:25</option><option value="570">09:30</option><option value="575">09:35</option><option value="580">09:40</option><option value="585">09:45</option><option value="590">09:50</option><option value="595">09:55</option><option value="600">10:00</option><option value="605">10:05</option>
                <option value="610">10:10</option><option value="615">10:15</option><option value="620">10:20</option><option value="625">10:25</option><option value="630">10:30</option><option value="635">10:35</option><option value="640">10:40</option><option value="645">10:45</option><option value="650">10:50</option><option value="655">10:55</option><option value="660">11:00</option><option value="665">11:05</option><option value="670">11:10</option><option value="675">11:15</option><option value="680">11:20</option><option value="685">11:25</option><option value="690">11:30</option><option value="695">11:35</option><option value="700">11:40</option><option value="705">11:45</option><option value="710">11:50</option><option value="715">11:55</option><option value="720">12:00</option><option value="725">12:05</option><option value="730">12:10</option><option value="735">12:15</option><option value="740">12:20</option><option value="745">12:25</option><option value="750">12:30</option><option value="755">12:35</option><option value="760">12:40</option><option value="765">12:45</option><option value="770">12:50</option><option value="775">12:55</option><option value="780">13:00</option><option value="785">13:05</option><option value="790">13:10</option><option value="795">13:15</option><option value="800">13:20</option><option value="805">13:25</option><option value="810">13:30</option><option value="815">13:35</option><option value="820">13:40</option><option value="825">13:45</option><option value="830">13:50</option><option value="835">13:55</option><option value="840">14:00</option><option value="845">14:05</option><option value="850">14:10</option><option value="855">14:15</option><option value="860">14:20</option><option value="865">14:25</option><option value="870">14:30</option><option value="875">14:35</option><option value="880">14:40</option><option value="885">14:45</option><option value="890">14:50</option><option value="895">14:55</option><option value="900">15:00</option><option value="905">15:05</option><option value="910">15:10</option><option value="915">15:15</option><option value="920">15:20</option><option value="925">15:25</option><option value="930">15:30</option><option value="935">15:35</option><option value="940">15:40</option><option value="945">15:45</option><option value="950">15:50</option><option value="955">15:55</option><option value="960">16:00</option><option value="965">16:05</option><option value="970">16:10</option><option value="975">16:15</option><option value="980">16:20</option><option value="985">16:25</option><option value="990">16:30</option><option value="995">16:35</option><option value="1000">16:40</option><option value="1005">16:45</option><option value="1010">16:50</option><option value="1015">16:55</option><option value="1020">17:00</option><option value="1025">17:05</option><option value="1030">17:10</option><option value="1035">17:15</option><option value="1040">17:20</option><option value="1045">17:25</option><option value="1050">17:30</option><option value="1055">17:35</option><option value="1060">17:40</option><option value="1065">17:45</option><option value="1070">17:50</option><option value="1075">17:55</option><option value="1080">18:00</option><option value="1085">18:05</option><option value="1090">18:10</option><option value="1095">18:15</option><option value="1100">18:20</option><option value="1105">18:25</option><option value="1110">18:30</option><option value="1115">18:35</option><option value="1120">18:40</option><option value="1125">18:45</option><option value="1130">18:50</option><option value="1135">18:55</option><option value="1140">19:00</option><option value="1145">19:05</option><option value="1150">19:10</option><option value="1155">19:15</option><option value="1160">19:20</option><option value="1165">19:25</option><option value="1170">19:30</option><option value="1175">19:35</option><option value="1180">19:40</option><option value="1185">19:45</option><option value="1190">19:50</option><option value="1195">19:55</option><option value="1200">20:00</option><option value="1205">20:05</option><option value="1210">20:10</option><option value="1215">20:15</option><option value="1220">20:20</option><option value="1225">20:25</option><option value="1230">20:30</option><option value="1235">20:35</option><option value="1240">20:40</option><option value="1245">20:45</option><option value="1250">20:50</option><option value="1255">20:55</option><option value="1260">21:00</option><option value="1265">21:05</option><option value="1270">21:10</option><option value="1275">21:15</option><option value="1280">21:20</option><option value="1285">21:25</option><option value="1290">21:30</option><option value="1295">21:35</option><option value="1300">21:40</option><option value="1305">21:45</option><option value="1310">21:50</option><option value="1315">21:55</option><option value="1320">22:00</option><option value="1325">22:05</option><option value="1330">22:10</option><option value="1335">22:15</option><option value="1340">22:20</option><option value="1345">22:25</option><option value="1350">22:30</option><option value="1355">22:35</option><option value="1360">22:40</option><option value="1365">22:45</option><option value="1370">22:50</option><option value="1375">22:55</option><option value="1380">23:00</option><option value="1385">23:05</option><option value="1390">23:10</option><option value="1395">23:15</option><option value="1400">23:20</option><option value="1405">23:25</option><option value="1410">23:30</option><option value="1415">23:35</option><option value="1420">23:40</option><option value="1425">23:45</option><option value="1430">23:50</option><option value="1435">23:55</option></select>
                  <select class="dhx_lightbox_day_select" aria-label="Day"><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option><option value="11">11</option><option value="12">12</option><option value="13">13</option><option value="14">14</option><option value="15">15</option><option value="16">16</option><option value="17">17</option><option value="18">18</option><option value="19">19</option><option value="20">20</option><option value="21">21</option><option value="22">22</option><option value="23">23</option><option value="24">24</option><option value="25">25</option><option value="26">26</option><option value="27">27</option><option value="28">28</option><option value="29">29</option><option value="30">30</option><option value="31">31</option></select>  
                  <select class="dhx_lightbox_month_select" aria-label="Month"><option value="0">January</option><option value="1">February</option><option value="2">March</option><option value="3">April</option><option value="4">May</option><option value="5">June</option><option value="6">July</option><option value="7">August</option><option value="8">September</option><option value="9">October</option><option value="10">November</option><option value="11">December</option></select>  
                <select class="dhx_lightbox_year_select" aria-label="Year">
                    <option value="2018">2018</option><option value="2019">2019</option><option value="2020">2020</option><option value="2021">2021</option><option value="2022">2022</option><option value="2023">2023</option><option value="2024">2024</option><option value="2025">2025</option><option value="2026">2026</option><option value="2027">2027</option></select> </div></div>

                </div>
                </form>

                

            </div>
    <!-- <div class="row">
                <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12">
                    <div class="theme-label-title">Credits</div>
                </div>
                <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12">
                    <div class="theme-label-subtitle">Credit Hours Available: 4 hours 13 minutes &#123;Show how
                        many credits care available once they specify the resource and contrast&#125;</div>
                </div>
            </div>           -->
    <div class="row" *ngIf="isLeaseSigned">
        <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12">
            <div class="theme-label-title">Credits</div>
        </div>
        <div *ngIf="TotalCreditHours" class="col-xl-3 col-lg-3 col-md-12 col-sm-12 col-12">
            <div class="form-group">
                <div class="input-group icon-active">
                    Total Credit Hour(s) :<br> {{TotalCreditHours}}
                </div>
            </div>
        </div>
        <div class="credit-outer" *ngIf="CreditDetailsList">
            <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12">
                <div class="table-responsive">
                    <dx-data-grid id="CreditDetailscontainer" [dataSource]="CreditDetailsList" [wordWrapEnabled]="true"
                        [showBorders]="true">
                        <dxo-state-storing [enabled]="true"></dxo-state-storing>
                        <dxo-paging [enabled]="false"></dxo-paging>
                        <dxo-grouping [contextMenuEnabled]="true"></dxo-grouping>
                        <dxi-column dataField="ReasonText" caption="Credit Reason"></dxi-column>
                        <dxi-column dataField="CreditReasonText" caption="Credit Reason description" width="300">
                        </dxi-column>
                        <dxi-column dataField="TotalHour" caption="Total Credit"></dxi-column>

                        <dxi-column cellTemplate="statusCellTemplate" caption="Status">
                        </dxi-column>
                        <div *dxTemplate="let data of 'statusCellTemplate'">
                            <div *ngIf="data.data.IsUseCredit == true">
                                <span>used</span>
                            </div>
                            <div *ngIf="data.data.IsUseCredit == false">
                                <span>unused</span>
                            </div>

                        </div>
                    </dx-data-grid>
                </div>
            </div>

        </div>

        <div class="col-xl-2 col-lg-2 col-md-12 col-sm-12 col-12">
            <div class="theme-label-subtitle">Credit Reason</div>
        </div>
        <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 col-12">
            <div class="form-group">
                <div class="input-group">
                    <select class="slwidth"
                        [ngClass]="{ 'is-invalid': (submitted && editFormControls.creditReasonID.errors) }"
                        formControlName="creditReasonID" class="form-control">
                        <option value="" selected>Select</option>
                        <option *ngFor="let group of creditReasonList" value={{group.ID}}>
                            {{group.ReasonText}}
                        </option>
                    </select>
                </div>

                <div *ngIf="(submitted && editFormControls.creditReasonID.errors)" class="invalid-feedback">
                    <div *ngIf="editFormControls.creditReasonID.errors?.required">
                        Credit Reason is required</div>
                </div>
            </div>
        </div>

    </div>
    <div class="row" *ngIf="isLeaseSigned">
        <div class="col-xl-2 col-lg-2 col-md-12 col-sm-12 col-12">
            <div class="theme-label-subtitle">Credits to Add</div>
        </div>
        <div class="col-xl-3 col-lg-3 col-md-12 col-sm-12 col-12">
            <div class="form-group">
                <div class="input-group">
                    <select [ngClass]="{ 'is-invalid': (submitted && editFormControls.creditHours.errors) }"
                        formControlName="creditHours" class="form-control">
                        <option value="">Select Hour</option>
                        <option value="0">0</option>
                        <option *ngFor="let hours of getTotalHours(24)" value={{hours}}>
                            {{hours}}
                        </option>
                    </select>
                </div>

                <div *ngIf="(BlockOffDaysSubmitted && editBlockOffFormControls.modalityType.errors)"
                    class="invalid-feedback">
                    <div *ngIf="editBlockOffFormControls.modalityType.errors?.required">
                        modality is required</div>
                </div>
                <div *ngIf="(submitted && editFormControls.creditHours.errors)" class="invalid-feedback">
                    <div class="required" *ngIf="editFormControls.creditHours.errors?.required">
                        Credit Hour is required</div>
                </div>
            </div>
        </div>
        <div class="col-xl-3 col-lg-3 col-md-12 col-sm-12 col-12">
            <div class="form-group">
                <div class="input-group">
                    <select [ngClass]="{ 'is-invalid': (submitted && editFormControls.creditMinutes.errors) }"
                        formControlName="creditMinutes" class="form-control">
                        <option value="">Select Minute</option>
                        <option *ngFor="let min of minutesList" value={{min}}>
                            {{min}}
                        </option>
                    </select>
                </div>
                <div *ngIf="(submitted && editFormControls.creditMinutes.errors)" class="invalid-feedback">
                    <div *ngIf="editFormControls.creditMinutes.errors?.required">
                        Credit Minute is required</div>
                </div>
            </div>
        </div>
    </div>
    <div class="row no-spacetextarea" *ngIf="isLeaseSigned">
        <div class="col-xl-8 col-lg-8 col-md-12 col-sm-12 col-12">
            <textarea class="form-control"
                [ngClass]="{ 'is-invalid': (submitted && editFormControls.CreditReasonText.errors) }"
                formControlName="CreditReasonText" placeholder="Reason for adding a credit (Required)"></textarea>
        </div>
        <div *ngIf="(submitted && editFormControls.CreditReasonText.errors)" class="invalid-feedback mt-0">
            <div *ngIf="editFormControls.CreditReasonText.errors?.required">
                Credit Reason Text is required</div>
        </div>
    </div>
    </form>
</div>
<div class="modal-footer">
    <button #deleteBtn id="deleteBtn" (click)="confirmDelete()"
        class="btn btn-border-clear btn-sm pull-left">Delete</button>
    <button type="button" #SaveBtn id="SaveBtn" (click)="saveBlockLeaseData()"
        class="btn btn-theme btn-sm pull-left">{{isBlockOffTime?"Save":"Add Block"}}</button>


    <a href="javascript:void(0)" class="btn btn-border-gray btn-sm pull-right" (click)="close()">Cancel</a>
</div>
</div>

<div class="modal fade modal-theme in modal-small" data-backdrop="static" id="checkFacilityPopup" tabindex="-1"
    role="dialog" aria-labelledby="exampleModalLabel" aria-modal="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Alert</h5>
                <div class="close-dismiss" data-dismiss="modal"></div>
            </div>
            <div class="modal-body">
                <ul style="list-style: none;">
                    <li><span>Facility is either closed, has a block of time already leased for this time or blacked
                            out.</span></li>
                    <li><span>Do you still want to lease during this time?</span></li>
                </ul>
            </div>
            <div class="modal-footer">
                <a href="javascript:void(0)" class="btn btn-border-gray pull-right btn-sm"
                    data-dismiss="modal">Cancel</a>
                <a (click)="confirmFacilityPopup()" href="javascript:void(0)" class="btn btn-theme pull-left btn-sm"
                    data-dismiss="modal">Yes</a>
            </div>
        </div>
    </div>
</div>
<div class="modal fade modal-theme in modal-small" data-backdrop="static" id="checkAlreadyBlockedLeasePopup"
    tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-modal="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Alert</h5>
                <div class="close-dismiss" data-dismiss="modal"></div>
            </div>
            <div class="modal-body">
                <p *ngIf="AlreadyBlockedLeaseList != 0 && AlreadyBlockedLeaseList != undefined;else isDateValid">
                    <span *ngIf="isBlockOffTime">YOU CAN NOT BLACK OUT SOME OF THE DATES SELECTED IN
                        BLACK OUT LEASE DURATION BECAUSE FOLLOWING DATES ARE
                        ALREADY LEASE
                        BLACKED OUT :</span>
                    <span *ngIf="!isBlockOffTime">YOU CAN NOT BLACK OUT SOME OF THE DATES SELECTED IN
                        BLACK OUT LEASE DURATION BECAUSE FOLLOWING DATES ARE
                        ALREADY BLACKED OUT :</span>
                </p>
                <ng-template #isDateValid>{{dateTimeValidationMsg}}</ng-template>
                <table>
                    <tbody>
                        <tr *ngFor="let template of AlreadyBlockedLeaseList">
                            <td><b>{{template.leasedate}}</b></td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="modal-footer">
                <a href="javascript:void(0)" class="btn btn-theme pull-left btn-sm" data-dismiss="modal">OK</a>
            </div>
        </div>
    </div>
</div>

<div class="modal fade modal-theme modal-small" id="pastDateConfirm" tabindex="-1" role="dialog"
    aria-labelledby="exampleModalLabel" aria-modal="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Alert</h5>
                <div class="close-dismiss" data-dismiss="modal"></div>
            </div>
            <div class="modal-body">
                <p>You have selected past date. do you want to continue</p>
            </div>
            <div class="modal-footer">
                <a href="javascript:void(0)" class="btn btn-border-gray pull-right btn-sm"
                    (click)="confirmPastDate(false)" data-dismiss="modal">No</a>
                <a (click)="confirmPastDate(true)" href="javascript:void(0)" class="btn btn-theme pull-left btn-sm"
                    data-dismiss="modal">Yes</a>
            </div>
        </div>
    </div>
</div>
<div class="modal fade modal-theme modal-small" id="greaterCreditTimePopUp" tabindex="-1" role="dialog"
    aria-labelledby="exampleModalLabel" aria-modal="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Alert</h5>
                <div class="close-dismiss" data-dismiss="modal" (click)="ClosePopup(true)"></div>
            </div>
            <div class="modal-body">
                <p>{{popupMessage}}</p>
            </div>
            <div class="modal-footer">
                <a href="javascript:void(0)" class="btn btn-border-gray pull-right btn-sm" data-dismiss="modal"
                    (click)="ClosePopup(true)">Close</a>
            </div>
        </div>
    </div>
</div>
<button class="d-none" #hiddengreaterCreditTimePopUp [hidden]="true" data-toggle="modal"
    data-target="#greaterCreditTimePopUp"></button>
<button class="d-none" #hiddenCheckFacilityPopupBtn [hidden]="true" data-toggle="modal"
    data-target="#checkFacilityPopup"></button>
<button class="d-none" #hiddencheckAlreadyBlockedLeasePopup [hidden]="true" data-toggle="modal"
    data-target="#checkAlreadyBlockedLeasePopup"></button>
<button class="d-none" #hiddenpastDateConfirm [hidden]="true" data-toggle="modal"
    data-target="#pastDateConfirm"></button>