<div class="main-page-body block-scheduler-page">
    <div class="page-header">
        <div class="row">
            <div class="col-xl-7 col-lg-7 col-md-7 col-sm-7 col-7">
                <div class="page-header-title">Block Lease Scheduler</div>
            </div>

        </div>
    </div>
    <div class="inner-page-body">
        <div class="search-field search-field-theme">
            <div class="row">
                <div class="col-xl-11 col-lg-11 col-md-11 col-sm-11 col-11">
                    <div class="theme-form">
                        <div class="form-group autocomplete form-group1">
                            <div class="theme-label">Facility Parent</div>
                            <div class="input-group">
                                <ng-select [items]="facilityParentList" #facilityParent (change)="changed($event)"
                                    placeholder="Select" [ngModelOptions]="{standalone: true}"
                                    bindLabel="FacilityParentName" [multiple]="false" [closeOnSelect]="false"
                                    bindValue="FacilityParentID" [(ngModel)]="selectedParentFacility">
                                    <ng-template ng-multi-label-tmp let-items="items" let-clear="clear">
                                        <div class="ng-value" *ngFor="let item of items | slice:0:1">
                                            <span class="ng-value-label"> {{item.FacilityParentName}}</span>
                                            <span class="ng-value-icon right" (click)="clear(item)"
                                                aria-hidden="true">×</span>
                                        </div>
                                        <div class="ng-value" *ngIf="items.length > 1">
                                            <span class="ng-value-label">{{items.length - 1}} more...</span>
                                        </div>
                                    </ng-template>
                                </ng-select>
                            </div>
                        </div>
                        <div class="form-group autocomplete form-group1">
                            <div class="theme-label">Facility</div>
                            <div class="input-group">
                                <ng-select [items]="facilityList" placeholder="Select" bindLabel="FacilityName"
                                    [multiple]="false" [closeOnSelect]="false" bindValue="FacilityID"
                                    [ngModelOptions]="{standalone: true}" [(ngModel)]="selectedFacility">
                                    <ng-template ng-multi-label-tmp let-items="items" let-clear="clear">
                                        <div class="ng-value" *ngFor="let item of items | slice:0:1">
                                            <span class="ng-value-label"> {{item.FacilityName}}</span>
                                            <span class="ng-value-icon right" (click)="clear(item)"
                                                aria-hidden="true">×</span>
                                        </div>
                                        <div class="ng-value" *ngIf="items.length > 1">
                                            <span class="ng-value-label">{{items.length - 1}} more...</span>
                                        </div>
                                    </ng-template>
                                </ng-select>
                            </div>
                        </div>
                        <div class="form-group autocomplete form-group1">
                            <div class="theme-label">Modality</div>
                            <div class="input-group">
                                <ng-select [items]="modalityList" placeholder="Select" bindLabel="ModalityName"
                                    [multiple]="true" [closeOnSelect]="false" bindValue="ModalityName"
                                    [ngModelOptions]="{standalone: true}" [(ngModel)]="selectedModality">
                                    <ng-template ng-multi-label-tmp let-items="items" let-clear="clear">
                                        <div class="ng-value" *ngFor="let item of items | slice:0:1">
                                            <span class="ng-value-label"> {{item.ModalityName}}</span>
                                            <span class="ng-value-icon right" (click)="clear(item)"
                                                aria-hidden="true">×</span>
                                        </div>
                                        <div class="ng-value" *ngIf="items.length > 1">
                                            <span class="ng-value-label">{{items.length - 1}} more...</span>
                                        </div>
                                    </ng-template>
                                </ng-select>
                            </div>
                        </div>
                        <div class="form-group autocomplete form-group1">
                            <div class="theme-label">Schedule Status</div>
                            <div class="input-group">
                                <ng-select [items]="scheduleStatusList" placeholder="Select" bindLabel="STATUS"
                                    [multiple]="true" [closeOnSelect]="false" bindValue="STATUS"
                                    [ngModelOptions]="{standalone: true}" [(ngModel)]="selectedscheduleStatus">
                                    <ng-template ng-multi-label-tmp let-items="items" let-clear="clear">
                                        <div class="ng-value" *ngFor="let item of items | slice:0:1">
                                            <span class="ng-value-label"> {{item.STATUS}}</span>
                                            <span class="ng-value-icon right" (click)="clear(item)"
                                                aria-hidden="true">×</span>
                                        </div>
                                        <div class="ng-value" *ngIf="items.length > 1">
                                            <span class="ng-value-label">{{items.length - 1}} more...</span>
                                        </div>
                                    </ng-template>
                                </ng-select>
                            </div>
                        </div>
                        <div class="form-group autocomplete form-group1">
                            <div class="theme-label">Lease Status</div>
                            <div class="input-group">
                                <select class="form-control" [ngModelOptions]="{standalone: true}"
                                    [(ngModel)]="SelectedsLeaseStatus">
                                    <option value="0">Select</option>
                                    <option value="1">Both parties not signed</option>
                                    <option value="1">Facility not signed</option>
                                    <option value="2">Completed</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group autocomplete form-group1">
                            <div class="theme-label">Paid Status</div>
                            <div class="input-group">
                                <select class="form-control" [ngModelOptions]="{standalone: true}"
                                    [(ngModel)]="selectedPaid">
                                    <option value="ALL" selected>ALL</option>
                                    <option value="PAID">PAID</option>
                                    <option value="UNPAID">UNPAID</option>

                                </select>
                            </div>
                        </div>
                        <div class="form-action">
                            <a href="javascript:void(0)" class="btn btn-theme" (click)="applyFilter()">SEARCH</a>
                            <a href="javascript:void(0)" class="btn btn-border" (click)="clearApplyFilter()">CLEAR</a>
                        </div>
                    </div>
                </div>
                <div class="col-xl-1 col-lg-1 col-md-1 col-sm-1 col-1">
                    <ul class="top-left action-menu">
                        <li class="pull-right">
                            <!-- <a href="javascript:void(0)" title="Settings" class="pe-7s-config"></a> -->
                            <a href="javascript:void(0);" class="pe-7s-config" data-toggle="modal"
                                data-target="#creditReasonsSettings">
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="row">
            <div>
                <div class="cash-price-table">
                    <div *ngIf="AllBlockLeaseList.length>0" class="table-responsive scheduling-facillities-table">
                        <dx-data-grid id="gridContainer" [dataSource]="AllBlockLeaseList" keyExpr="FacilityID"
                            [columnAutoWidth]="true" [showBorders]="true" [allowColumnReordering]="true">
                            <dxo-column-chooser [enabled]="true"></dxo-column-chooser>
                            <dxi-column cellTemplate="viewCellTemplate" dataField="Facilityname"> </dxi-column>
                            <dxi-column [width]="250" [caption]="AllBlockLeaseList[0].MonthLabels0"> 
                                <dxi-column [width]="125" caption="MRI" cellTemplate="getDataTemplate">
                                </dxi-column>
                                <dxi-column [width]="125" caption="CT" cellTemplate="getDataTemplate">
                                </dxi-column>
                            </dxi-column>
                            <dxi-column [width]="250" [caption]="AllBlockLeaseList[0].MonthLabels1">
                                <dxi-column [width]="125" caption="MRI" cellTemplate="getDataTemplate">
                                </dxi-column>
                                <dxi-column [width]="125" caption="CT" cellTemplate="getDataTemplate">
                                </dxi-column>
                            </dxi-column>
                            <dxi-column [width]="250" [caption]="AllBlockLeaseList[0].MonthLabels2">
                                <dxi-column [width]="125" caption="MRI" cellTemplate="getDataTemplate">
                                </dxi-column>
                                <dxi-column [width]="125" caption="CT" cellTemplate="getDataTemplate">
                                </dxi-column>
                            </dxi-column>
                            <dxi-column [width]="250" [caption]="AllBlockLeaseList[0].MonthLabels3">
                                <dxi-column [width]="125" caption="MRI" cellTemplate="getDataTemplate">
                                </dxi-column>
                                <dxi-column [width]="125" caption="CT" cellTemplate="getDataTemplate">
                                </dxi-column>
                            </dxi-column>
                            <dxi-column [width]="250" [caption]="AllBlockLeaseList[0].MonthLabels4">
                                <dxi-column [width]="125" caption="MRI" cellTemplate="getDataTemplate">
                                </dxi-column>
                                <dxi-column [width]="125" caption="CT" cellTemplate="getDataTemplate">
                                </dxi-column>
                            </dxi-column>
                            <dxi-column [width]="250" [caption]="AllBlockLeaseList[0].MonthLabels5">
                                <dxi-column [width]="125" caption="MRI" cellTemplate="getDataTemplate">
                                </dxi-column>
                                <dxi-column [width]="125" caption="CT" cellTemplate="getDataTemplate">
                                </dxi-column>
                            </dxi-column>
                            <dxi-column [width]="250" [caption]="AllBlockLeaseList[0].MonthLabels6">
                                <dxi-column [width]="125" caption="MRI" cellTemplate="getDataTemplate">
                                </dxi-column>
                                <dxi-column [width]="125" caption="CT" cellTemplate="getDataTemplate">
                                </dxi-column>
                            </dxi-column>
                            <dxi-column [width]="250" [caption]="AllBlockLeaseList[0].MonthLabels7">
                                <dxi-column [width]="125" caption="MRI" cellTemplate="getDataTemplate">
                                </dxi-column>
                                <dxi-column [width]="125" caption="CT" cellTemplate="getDataTemplate">
                                </dxi-column>
                            </dxi-column>
                            <dxi-column [width]="250" [caption]="AllBlockLeaseList[0].MonthLabels8">
                                <dxi-column [width]="125" caption="MRI" cellTemplate="getDataTemplate">
                                </dxi-column>
                                <dxi-column [width]="125" caption="CT" cellTemplate="getDataTemplate">
                                </dxi-column>
                            </dxi-column>
                            <dxi-column [width]="250" [caption]="AllBlockLeaseList[0].MonthLabels9">
                                <dxi-column [width]="125" caption="MRI" cellTemplate="getDataTemplate">
                                </dxi-column>
                                <dxi-column [width]="125" caption="CT" cellTemplate="getDataTemplate">
                                </dxi-column>
                            </dxi-column>
                            <dxi-column [width]="250" [caption]="AllBlockLeaseList[0].MonthLabels10">
                                <dxi-column [width]="125" caption="MRI" cellTemplate="getDataTemplate">
                                </dxi-column>
                                <dxi-column [width]="125" caption="CT" cellTemplate="getDataTemplate">
                                </dxi-column>
                            </dxi-column>
                            <dxi-column [width]="250" [caption]="AllBlockLeaseList[0].MonthLabels11">
                                <dxi-column [width]="125" caption="MRI" cellTemplate="getDataTemplate">
                                </dxi-column>
                                <dxi-column [width]="125" caption="CT" cellTemplate="getDataTemplate">
                                </dxi-column>
                            </dxi-column>
                            <dxi-column [width]="250" [caption]="AllBlockLeaseList[0].MonthLabels12">
                                <dxi-column [width]="125" caption="MRI" cellTemplate="getDataTemplate">
                                </dxi-column>
                                <dxi-column [width]="125" caption="CT" cellTemplate="getDataTemplate">
                                </dxi-column>
                            </dxi-column>
                            <div *dxTemplate="let data of 'getDataTemplate'">
                                <ul class="datagrid-list">
                                    <li *ngIf="getColumnByDataField(data)[0].IsScheduledComplete != null">
                                        <img [src]="getColumnByDataField(data)[0].IsScheduledComplete==true?'assets/images/schedule-check.png':'assets/images/schedule-cancel.png'"
                                            style="width: 18px;" />
                                        <span
                                            *ngIf="getColumnByDataField(data)[0].MRI != null && data.column.caption == 'MRI'"
                                            class="displayCounter">{{getColumnByDataField(data)[0].MRI}}</span>
                                        <span
                                            *ngIf="getColumnByDataField(data)[0].CT != null && data.column.caption == 'CT'"
                                            class="displayCounter">{{getColumnByDataField(data)[0].CT}}</span>
                                    </li>
                                    <li
                                        *ngIf="getColumnByDataField(data)[0].IsCtService === false && data.column.caption == 'CT'">
                                        <img src="/assets/images/schedule-cross.png" style="width: 18px;" />
                                    </li>
                                    <li
                                        *ngIf="getColumnByDataField(data)[0].IsMriService === false && data.column.caption == 'MRI'">
                                        <img src="/assets/images/schedule-cross.png" style="width: 18px;" />
                                    </li>
                                    <li *ngIf="getColumnByDataField(data)[0].IsPaid != null">
                                        <img [src]="getColumnByDataField(data)[0].IsPaid==true?'assets/images/paid.png':'assets/images/unpaid.png'"
                                            style="width: 18px;" />
                                    </li>
                                    <li *ngIf="getColumnByDataField(data)[0].IsFacilitySign != null">
                                        <img [src]="getColumnByDataField(data)[0].IsFacilitySign==true?'assets/images/sign-lease.png':'assets/images/sign-pending.png'"
                                            style="width: 18px;" />
                                    </li>
                                </ul>
                            </div>
                            <div *dxTemplate="let data of 'viewCellTemplate'">
                                <a href="javascript:void(0);" class="link-btn"
                                    (click)="getCalendarSchedulerWindowById(data)" data-toggle="modal"
                                    data-target="#CalendarSchedulerWindow">
                                    {{data.data.Facilityname}}</a>
                            </div>
                        </dx-data-grid>

                    </div>

                </div>
            </div>
        </div>
        <div class="cash-price-list">
            <ul>
                <li>
                    <img src="/assets/images/schedule-check.png" />
                    <span>Schedule Complete</span>
                </li>
                <li>
                    <img src="/assets/images/schedule-cross.png" />
                    <span>Modality is not offered at facility</span>
                </li>
                <li>
                    <img src="/assets/images/schedule-cancel.png" />
                    <span>Schedule not complete</span>
                </li>
            </ul>
            <ul>
                <li>
                    <img src="/assets/images/sign-lease.png" />
                    <span>Lease signed</span>
                </li>
                <li>
                    <img src="/assets/images/sign-pending.png" />
                    <span>Pending facility signature</span>
                </li>
                <li>
                    <img src="/assets/images/sign-parties.png" />
                    <span>Lease not signed by both parties</span>
                </li>
            </ul>
            <ul>
                <li>
                    <img src="/assets/images/paid.png" style="width:11px;" />
                    <span>Paid</span>
                </li>
                <li>
                    <img src="/assets/images/unpaid.png" style="width:11px;" />
                    <span>Unpaid</span>
                </li>

            </ul>
        </div>
    </div>
</div>
<app-calendar-scheduler></app-calendar-scheduler>
<app-credit-reasons-setting></app-credit-reasons-setting>